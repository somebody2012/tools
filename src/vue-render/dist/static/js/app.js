webpackJsonp([1],{"+hAf":function(e,t){},"09yM":function(e,t){},"0CLL":function(e,t){},"DW+F":function(e,t){},FK5u:function(e,t){},Mv8w:function(e,t){},NHnr:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r("kV13"),n={name:"Menu",components:{},props:{},data:function(){return{isCollapse:!1}},methods:{handleOpen:function(e,t){console.log(e,t)},handleClose:function(e,t){console.log(e,t)}},watch:{},filters:{},mounted:function(){}},o={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"Menu"},[r("el-menu",{attrs:{"default-active":"/GenTrade","default-openeds":["/GenTrade"],collapse:e.isCollapse,router:""}},[r("el-submenu",{attrs:{index:"1"}},[r("template",{slot:"title"},[r("i",{staticClass:"el-icon-s-tools"}),e._v(" "),r("span",{attrs:{slot:"title"},slot:"title"},[e._v("工具")])]),e._v(" "),r("el-menu-item",{attrs:{index:"/GenTrade"}},[e._v("生成交易")]),e._v(" "),r("el-menu-item",{attrs:{index:"/GenPrintF"}},[e._v("生成打印F表")]),e._v(" "),r("el-menu-item",{attrs:{index:"/GenInterface"}},[e._v("生成接口")])],2)],1)],1)},staticRenderFns:[]};var s={name:"App",components:{Menu:r("C7Lr")(n,o,!1,function(e){r("yfIn")},"data-v-69219a49",null).exports},data:function(){return{menuWidth:200}},computed:{left:function(){return this.menuWidth-200}},methods:{func:function(e){this.menuWidth=e?0:200}}},i={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("div",{staticClass:"menu",style:{left:e.left+"px"}},[r("Menu")],1),e._v(" "),r("div",{staticClass:"tools-container",style:{marginLeft:e.menuWidth+"px"}},[r("router-view"),e._v(" "),r("i",{directives:[{name:"show",rawName:"v-show",value:200==e.menuWidth,expression:"menuWidth==200"}],staticClass:"el-icon-d-arrow-left handle-icon",on:{click:function(t){return e.func(!0)}}}),e._v(" "),r("i",{directives:[{name:"show",rawName:"v-show",value:0==e.menuWidth,expression:"menuWidth==0"}],staticClass:"el-icon-d-arrow-right handle-icon",on:{click:function(t){return e.func(!1)}}})],1)])},staticRenderFns:[]};var l=r("C7Lr")(s,i,!1,function(e){r("DW+F")},"data-v-956f53a0",null).exports,u=r("7LQH"),c={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"Home"},[t("div",[this._v("home")])])}]};var d=r("C7Lr")({name:"Home",components:{},props:{},data:function(){return{}},methods:{},watch:{},filters:{},mounted:function(){}},c,!1,function(e){r("iWT2")},"data-v-551d7287",null).exports,m=r("ZLEe"),p=r.n(m),f=r("rVsN"),v=r.n(f),h=r("3cXf"),b=r.n(h),g=r("lC5x"),A=r.n(g),C=r("J0Oq"),_=r.n(C),w=r("x7Ey"),N=r.n(w);var y,x={fetchStandardFields:function(){var e={SYS_HEAD:{BIZ_FOLN_NO:"",SYS_FOLN_NO:"",CLIENT_TYP:"110064",BIZ_ACCESS_CHNL_CD:"0101",SCENE_CD:"DBComm",SERV_PTY_PROD_CD:"067",SERV_CD:"DB",REQE_PTY_PROD_CD:"066",REQE_PTY_REQE_TS:"2020-01-10 19:14:03.966",REQE_PTY_IP:"20.3.15.151",RequestDate:"20200110",RequestTime:"191403",BagSeqNo:"",AppNum:"TE",Reserve:""},APP_HEAD:{UserNum:"204217",UserName:"俸馨",BranchNum:"2039",BranchName:"四川广汉农村商业银行股份有限公司对公专柜",DvcNum:"",MacValue:"8C-EC-4B-B7-10-91",DeviceNum:"",DeviceModel:"",Tlr:"",AhrTlr:"",AhrTaskNum:"",AhrBrah:"",chcekTlr:"",LUNCH_EMPNBR:"",checkOrgNo:"",BsnTranCode:"",FictTellerNum:"",LegalPersonNum:"2105",TranCode:"",TranNm:""},Body:{CommCode:"DB",SceneCode:"DBComm",TradeData:'{"_busidatakey_":"queryStandardFields","PB_PRIVATE_KEY":"000000000000000A"}'}},t={BranchNum:"2039",ConsumerId:"066",ConsumerIP:"20.3.15.151","Content-Type":"application/json",LegalNum:"2105",Origin:"http://localhost:53008",Referer:"http://localhost:53008/FCClient/modules/frame/custom-service/index.html",Reserve:"",TraceId:"01157865416332746708","User-Agent":"Mozilla/5.0 (Windows NT 6.3; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/39.0.2171.95 Safari/537.36",UserNum:"204217","X-AmebaCloud-RandomNumber":"0.1513719200156629","X-AmebaCloud-VerifyTime":"1578654163332"};return new v.a(function(r){var a=window.standardFields;a?r({isSuccess:!0,data:a}):N()({method:"post",url:"http://10.16.2.228/abside/abs-ib-dbcomm/dbComm",headers:t,data:e}).then(function(t){if("000000"==(t=t.data).OutArgs.errorcode){var a=JSON.parse(t.result.Rslt).Result.map(function(e){var t={};try{t=new Function("return "+(e.COMP_DESC||"{}"))()}catch(t){alert("解析JSON出错"+e.COMP_DESC)}return{label:e.COLM_DESC,value:e.COLM_NM,isFullRow:e.DGIT>60,tagName:e.COMP_TAG,compAttr:t}});window.standardFields=a,r({isSuccess:!0,data:a})}else r({isSuccess:!1,data:e})}).catch(function(e){r({isSuccess:!1,data:[]})})})},queryAllStandardFields:function(){var e={SYS_HEAD:{BIZ_FOLN_NO:"",SYS_FOLN_NO:"",CLIENT_TYP:"110064",BIZ_ACCESS_CHNL_CD:"0101",SCENE_CD:"DBComm",SERV_PTY_PROD_CD:"067",SERV_CD:"DB",REQE_PTY_PROD_CD:"066",REQE_PTY_REQE_TS:"2020-01-10 19:14:03.966",REQE_PTY_IP:"20.3.15.151",RequestDate:"20200110",RequestTime:"191403",BagSeqNo:"",AppNum:"TE",Reserve:""},APP_HEAD:{UserNum:"204217",UserName:"俸馨",BranchNum:"2039",BranchName:"四川广汉农村商业银行股份有限公司对公专柜",DvcNum:"",MacValue:"8C-EC-4B-B7-10-91",DeviceNum:"",DeviceModel:"",Tlr:"",AhrTlr:"",AhrTaskNum:"",AhrBrah:"",chcekTlr:"",LUNCH_EMPNBR:"",checkOrgNo:"",BsnTranCode:"",FictTellerNum:"",LegalPersonNum:"2105",TranCode:"",TranNm:""},Body:{CommCode:"DB",SceneCode:"DBComm",TradeData:'{"_busidatakey_":"queryAllStandardFields","PB_PRIVATE_KEY":"000000000000000A"}'}},t={BranchNum:"2039",ConsumerId:"066",ConsumerIP:"20.3.15.151","Content-Type":"application/json",LegalNum:"2105",Origin:"http://localhost:53008",Referer:"http://localhost:53008/FCClient/modules/frame/custom-service/index.html",Reserve:"",TraceId:"01157865416332746708","User-Agent":"Mozilla/5.0 (Windows NT 6.3; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/39.0.2171.95 Safari/537.36",UserNum:"204217","X-AmebaCloud-RandomNumber":"0.1513719200156629","X-AmebaCloud-VerifyTime":"1578654163332"};return new v.a(function(r){var a=window.standardAllFields;a?r({isSuccess:!0,data:a}):N()({method:"post",url:"http://10.16.2.228/abside/abs-ib-dbcomm/dbComm",headers:t,data:e}).then(function(t){if("000000"==(t=t.data).OutArgs.errorcode){var a=JSON.parse(t.result.Rslt).Result.map(function(e){return{label:e.COLM_DESC,value:e.COLM_NM,isFullRow:(e.DGIT||0)>=60,isAmt:0!=(e.DEC_DGIT||0)}});window.standardAllFields=a,r({isSuccess:!0,data:a})}else r({isSuccess:!1,data:e})}).catch(function(e){r({isSuccess:!1,data:[]})})})},getParentMenuInfo:function(){var e={SYS_HEAD:{BIZ_FOLN_NO:"",SYS_FOLN_NO:"",CLIENT_TYP:"110064",BIZ_ACCESS_CHNL_CD:"0101",SCENE_CD:"DBComm",SERV_PTY_PROD_CD:"067",SERV_CD:"DB",REQE_PTY_PROD_CD:"066",REQE_PTY_REQE_TS:"2020-01-10 19:14:03.966",REQE_PTY_IP:"20.3.15.151",RequestDate:"20200110",RequestTime:"191403",BagSeqNo:"",AppNum:"TE",Reserve:""},APP_HEAD:{UserNum:"204217",UserName:"俸馨",BranchNum:"2039",BranchName:"四川广汉农村商业银行股份有限公司对公专柜",DvcNum:"",MacValue:"8C-EC-4B-B7-10-91",DeviceNum:"",DeviceModel:"",Tlr:"",AhrTlr:"",AhrTaskNum:"",AhrBrah:"",chcekTlr:"",LUNCH_EMPNBR:"",checkOrgNo:"",BsnTranCode:"",FictTellerNum:"",LegalPersonNum:"2105",TranCode:"",TranNm:""},Body:{CommCode:"DB",SceneCode:"DBComm",TradeData:'{"_busidatakey_":"getParentMenuInfo","PB_PRIVATE_KEY":"000000000000000A"}'}},t={BranchNum:"2039",ConsumerId:"066",ConsumerIP:"20.3.15.151","Content-Type":"application/json",LegalNum:"2105",Origin:"http://localhost:53008",Referer:"http://localhost:53008/FCClient/modules/frame/custom-service/index.html",Reserve:"",TraceId:"01157865416332746708","User-Agent":"Mozilla/5.0 (Windows NT 6.3; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/39.0.2171.95 Safari/537.36",UserNum:"204217","X-AmebaCloud-RandomNumber":"0.1513719200156629","X-AmebaCloud-VerifyTime":"1578654163332"};return new v.a(function(r){window.parentMenuInfo?r({isSuccess:!0,data:window.parentMenuInfo}):N()({method:"post",url:"http://10.16.2.228/abside/abs-ib-dbcomm/dbComm",headers:t,data:e}).then(function(e){if("000000"==(e=e.data).OutArgs.errorcode){var t=JSON.parse(e.result.Rslt).Result;window.parentMenuInfo=t,r({isSuccess:!0,data:t})}else r({isSuccess:!1,data:[]})}).catch(function(e){r({isSuccess:!1,data:[]})})})}},T=[{name:"v-model",attrPosition:"data"},{name:"paraFile",attrPosition:"tag",value:""},{name:"listName",attrPosition:"tag",value:""},{name:":success",attrPosition:"methods",args:["name","age"]}],S=(JSON.parse(b()(T)),JSON.parse(b()(T)),JSON.parse(b()(T)),JSON.parse(b()(T)),[{groupTitle:"客户信息",label:"IMEI序列号",":requisite":"true"},{groupTitle:"客户信息",label:"SIM卡序列号",":requisite":"true"},{groupTitle:"客户信息",label:"保证金金额",":requisite":"true"},{groupTitle:"客户信息1",label:"保证金账号",":requisite":"true"},{groupTitle:"客户信息1",label:"保证金账户标志",":requisite":"true"}]),F={getStandardConfig:function(e){var t=this;return _()(A.a.mark(function e(){var r;return A.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.fetchStandardFields();case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}},e,t)}))()},transformExcelData:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:JSON.parse(b()(S)),a=r.map(function(e){return e.groupTitle});return a=(a=a.filter(function(e,t){return a.indexOf(e)==t})).map(function(e,t){return{groupTitle:e,groupId:t}}),r.forEach(function(e){var t=a.find(function(t){return t.groupTitle==e.groupTitle});e.groupId=t.groupId}),{excelData:r,msgs:this.findEnFieldName(e,t,r).msgs}},findEnFieldName:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=[],n=function(e){var n=r[e],o=t.find(function(e){return e.label==n.label});if(o){n.value=o.value,n.compAttr=o.compAttr,n.isFullRow=o.isFullRow,n.tagName=o.tagName;for(var s=0;s<n.compAttr.length;s++){var i=o.compAttr[s];if("methods"==i.attrPosition){var l=i.name.replace(/:/g,"").toLocaleLowerCase();l=l.charAt(0).toUpperCase()+l.substr(1);var u=""+o.value+l;i.value=u}else"data"==i.attrPosition&&"v-model"==i.name&&(i.value=o.value);["paraFile","listName"].includes(i.name)&&(i.listNameOptions=[])}var c=n.compAttr;n.tagName;if(n.hasOwnProperty(":requisite")&&c.push({name:":requisite",attrPosition:"tag",value:n[":requisite"]}),n.hasOwnProperty(":disabled")){var d=n.compAttr.find(function(e){return":disabled"==e.name});d?d.value=n[":disabled"]:c.push({name:":disabled",attrPosition:"tag",value:n[":disabled"]})}if(n.hasOwnProperty(":readonly")){var m=n.compAttr.find(function(e){return":readonly"==e.name});m?m.value=n[":readonly"]:c.push({name:":readonly",attrPosition:"tag",value:n[":readonly"]})}if(n.hasOwnProperty(":visible")){var p=n.compAttr.find(function(e){return":visible"==e.name});p?p.value=n[":visible"]:c.push({name:":visible",attrPosition:"tag",value:n[":visible"]})}var f={name:"ref",value:n.value,attrPosition:"tag"},v={name:"property",value:n.value,attrPosition:"tag"},h={name:"label",value:n.label,attrPosition:"tag"};c.splice(1,0,v),c.splice(1,0,f),c.splice(1,0,h);c.find(function(e){return"ref"==e.name}),c.find(function(e){return"property"==e.name}),c.find(function(e){return"label"==e.name})}else a.push(n.label)},o=0;o<r.length;o++)n(o);return{msgs:a}}},R=r("89ll"),k=r.n(R),E=r("a3Yh"),P=r.n(E),D=(y={"custom-user-num":'import customUserNum from "@/components/bank/teller/custom-user-num/CustomUserNum.vue"',"custom-user-pwd":'import customUserPwd from "@/components/bank/teller/custom-user-pwd/CustomUsePwd.vue"',"custom-user-verify-type":'import customUserVerifyType from "@/components/bank/teller/custom-user-verify-type/CustomUserVerifyType.vue"',"custom-cert-num":'import customCertNum from "@/components/bank/customer/custom-cert-num/CustomCertNum.vue"',"custom-cert-type":'import customCertType from "@/components/bank/customer/custom-cert-type/CustomCertType.vue"',"custom-customer-type":'import CustomCustomerType from "@/components/bank/customer/custom-customer-type/CustomCustomerType.vue"',"custom-cust-num":'import CustomCustNum from "@/components/bank/customer/custom-cust-num/CustomCustNum.vue"',"custom-cust-addr":'import CustomCustAddr from "@/components/bank/customer/custom-cust-addr/CustomCustAddr.vue"',"custom-phone-num":'import CustomPhoneNum from "@/components/bank/customer/custom-phone-num/CustomPhoneNum.vue"',"custom-email":'import CustomEmail from "@/components/bank/customer/custom-email/CustomEmail.vue"',"custom-pinying-name":'import CustomPinyingName from "@/components/bank/customer/custom-pinying-name/CustomPinyingName.vue"',"custom-account":'import CustomAccount from "@/components/bank/account/custom-account/CustomAccount.vue"',"custom-sub-account":'import CustomSubAccount from "@/components/bank/account/custom-sub-account/CustomSubAccount.vue"',"custom-password":'import CustomPassword from "@/components/bank/account/custom-password/CustomPassword.vue"',"custom-card-input-mode":'import CustomCardInputMode from "@/components/bank/account/custom-card-input-mode/CustomCardInputMode.vue"',"custom-currency":'import CustomCurrency from "@/components/bank/account/custom-currency/CustomCurrency.vue"',"custom-remittance-mark":'import CustomRemittanceMark from "@/components/bank/account/custom-remittance-mark/CustomRemittanceMark.vue"',"custom-withdrawal":'import CustomWithdrawal from "@/components/bank/account/custom-withdrawal/CustomWithdrawal.vue"',"custom-cash-analysis-code":'import CustomCashAnalysisCode from "@/components/bank/account/custom-cash-analysis-code/CustomCashAnalysisCode.vue"',"custom-charge-mode":'import CustomChargeMode from "@/components/bank/account/custom-charge-mode/CustomChargeMode.vue"',"custom-passbook-num":'import CustomPassbookNum from "@/components/bank/account/custom-passbook-num/CustomPassbookNum.vue"',"custom-sealcard-num":'import CustomSealcardNum from "@/components/bank/account/custom-seal-card-num/CustomSealcardNum.vue"',"custom-coronal-num":'import CustomCoronalNum from "@/components/bank/account/custom-coronal-num/CustomCoronalNum.vue"',"custom-deposit-type":'import CustomDepositType from "@/components/bank/customer/custom-deposit-type/CustomDepositType.vue"',"custom-voucher-num":'import CustomVoucherNum from "@/components/bank/customer/custom-voucher-num/CustomVoucherNum.vue"',"custom-voucher-interval":'import CustomVoucherInterval from "@/components/bank/voucher/custom-voucher-interval/CustomVoucherInterval.vue"',"custom-certification-level":'import CustomCertificationLevel from "@/components/bank/agent/custom-certification-level/CustomCertificationLevel.vue"',"custom-socialsec-prdcode":'import CustomSocialsecPrdcode from "@/components/bank/agent/custom-socialsec-prdcode/CustomSocialsecPrdcode.vue"',"custom-escrow-num":'import CustomEscrowNum from "@/components/bank/loan/custom-escrow-num/CustomEscrowNum.vue"',"custom-equity-account":'import CustomEquityAccount from "@/components/bank/equity/custom-equity-account/CustomEquityAccount.vue"',"custom-agent":'import CustomAgent from "@/components/bank/other/custom-agent/CustomAgent.vue"',"custom-user-num-project":'import CustomUserNumProject from "@/components/project/teller/custom-user-num-project/CustomUserNumProject.vue"',"custom-user-pwd-project":'import CustomUserPwdProject from "@/components/project/teller/custom-user-pwd-project/CustomUserPwdProject.vue"',"custom-account-project":'import CustomAccountProject from "@/components/project/account/custom-account-project/CustomAccountProject.vue"',"custom-product-code":'import CustomProductCode from "@/components/project/account/custom-product-code/CustomProductCode.vue"',"custom-remark-code":'import CustomRemarkCode from "@/components/project/account/custom-remark-code/CustomRemarkCode.vue"',"custom-bankno":'import CustomBankno from "@/components/project/account/custom-bankno/CustomBankno.vue"'},P()(y,"custom-cust-num",'import CustomCustNum from "@/components/project/customer/custom-cust-num/CustomCustNum.vue"'),P()(y,"custom-water-elec-product-code",'import CustomWaterElecProductCode from "@/components/project/agent/custom-water-elec-product-code/CustomWaterElecProductCode.vue"'),P()(y,"custom-orgno",'import CustomOrgno from "@/components/project/branch/custom-orgno/CustomOrgno.vue"'),P()(y,"custom-upload",'import CustomUpload from "@/components/project/branch/custom-upload/CustomUpload.vue"'),P()(y,"custom-upload",'import CustomDownload from "@/components/project/branch/custom-download/CustomDownload.vue"'),y);function O(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return 0==e.length?"":(e=e.charAt(0).toUpperCase()+e.substring(1)).replace(/-(\w)/,function(e,t,r){return t.toUpperCase()})}function M(e,t){var r=[],a=[];if(t.compAttr.every(function(e){return Boolean(e.attrPosition)})){for(var n=0;n<t.compAttr.length;n++){var o=t.compAttr[n];"methods"==o.attrPosition?r.push({name:o.name,args:o.args,value:o.value}):"data"==o.attrPosition&&("v-model"==o.name?(o.value="TradeData."+t.value,a.push(t.value)):a.push(o.value))}!function(e,t){var r=t.compAttr,a=t.tagName,n=[":visible"],o="<"+a+" "+(r=(r=r.filter(function(e){return!1===e.value?!!n.includes(e.name)&&!e.value:Boolean(e.value)})).map(function(e){return e.name+'="'+e.value+'"'})).join(" ")+"></"+a+">";t.compTpl=o}(0,t)}else e.alert("<p>有属性没有attrPosition"+b()(t)+"</p>");return{methods:r,dataFields:a}}var L={genAll:function(e,t){var r=function(e,t){for(var r=[],a=[],n={import:[],components:[]},o=0;o<t.length;o++){var s=t[o];if("custom-table"==s.tagName){var i={tplStr:[],methods:[],dataFields:[]},l=i.methods,u=i.dataFields;r=r.concat(l),a=a.concat(u)}else{var c=M(e,s),d=c.methods,m=c.dataFields;r=r.concat(d),a=a.concat(m)}D[s.tagName]?function(){var e=O(s.tagName);n.components.find(function(t){return t==e})||(n.components.push(e),n.import.push(D[s.tagName]))}():console.log("comp-import 未配置"+s.tagName)}return{standardFields:t,methodsAll:r=function(e,t){return t=t.map(function(e){return"async "+e.value+"("+(e.args||[]).join(",")+"){}"})}(0,r),dataFieldsAll:a,importArr:n}}(e,t);return{excelFieldsAll:r.standardFields,methodsAll:r.methodsAll,dataFieldsAll:r.dataFieldsAll,importArr:r.importArr}},twoDimensionalArray:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=[],a=k.a.groupBy(t,function(e){return e.groupId}),n=Math.max.apply(null,p()(a)),o=0;o<=n;o++)r.push(a[o]);return r=r.map(function(e){return function(e){for(var t=[],r=0;r<e.length;r++){var a=e[r];if(0==t.length)t.push([a]);else{var n=t[t.length-1],o=n[n.length-1];2==n.length?t.push([a]):o.isFullRow?t.push([a]):n.push(a)}}return t}(e)})},handleTableInfo:function(e,t){for(var r=[],a=[],n=[],o=[],s=e.map(function(e){return e.label.split("|").filter(function(e){return e})}),i=0;i<s.length;i++)for(var l=function(e){var a=s[i][e];t.find(function(e){return e.label==a})||r.push(a)},u=0;u<s[i].length;u++)l(u);return 0!=r.length?{tMsgs:r,tMethods:a,tDataFields:n,tableTpls:o}:(s.map(function(e){return e.map(function(e){var r=t.find(function(t){return t.label==e});return{label:r.label,value:r.value}})}).forEach(function(e,t){var r=e.map(function(e){return{label:e.label,prop:e.value,type:"input"}});n.push({label:"tableHeadData"+t,value:b()(r)}),n.push({label:"tableData"+t,value:b()([])}),n.push({label:"btnGroup"+t,value:b()([])});var a='<custom-table ref="customTable'+t+'" :tableHeadData="tableHeadData'+t+'" :tableData="tableData'+t+'" :btnGroup="btnGroup'+t+'"/>';o.push(a)}),{tMsgs:r,tMethods:a,tDataFields:n,tableTpls:o})}},I=window.m.xlsx,B=function(e,t){var r=document.createElement("a");r.download=t;var a=URL.createObjectURL(e);r.href=a,r.click(),setTimeout(function(){URL.revokeObjectURL(a)},100)},G=function(e){if("undefined"!=typeof ArrayBuffer){for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),a=0;a!=e.length;++a)r[a]=255&e.charCodeAt(a);return t}for(t=new Array(e.length),a=0;a!=e.length;++a)t[a]=255&e.charCodeAt(a);return t};var U={readExcelAsync:function(e){return new v.a(function(t,r){try{var a=new FileReader(e);a.onload=function(e){var r=I.read(e.target.result,{type:"binary"}),a={};r.SheetNames.forEach(function(e){var t=r.Sheets[e],n=I.utils.sheet_to_json(t,{header:"A",blankrows:!1,defval:""});a[e]=n}),t({isSuccess:!0,data:a})},a.readAsBinaryString(e)}catch(e){t({isSuccess:!1,errorcode:e.name,msg:e.message})}})},exportJsonToExcel:function(e,t){new Date;var r={SheetNames:["Sheet1"],Sheets:{},Props:{}};r.Sheets.Sheet1=I.utils.json_to_sheet(e),r.Sheets.Sheet1["!cols"]=[{wch:30},{wch:20},{wch:40},{wch:20}],t=t||"模板.xls",B(new Blob([G(I.write(r,{bookType:"xlsx",bookSST:!1,type:"binary"}))],{type:"application/octet-stream"}),t)}},V={name:"GenTrade",data:function(){return{titleRule:[{required:!0,message:"不能为空"}],tradeAttrArea:{tradeRoot:"E:\\work\\zantong\\qdgz_TEClient\\FCClient",devGroup:"asu-test",devGroupChild:"",tradeCode:"00101001",tradeName:"测试交易生成",userName:"",email:"",tradeCodeBiz:"010101",menuPosition:"001",menuIcon:"inner-gird-maintain.svg",parentMenu:"0101",visiable:"1",signVisiable:"1"},devGroupOptionsChild:[],devGroupOptions:[{label:"测试-asu-test",value:"asu-test"}],collapseValues:[],collapseValuesButtom:[],rules:[{type:"any"}],tplsStr:"",excelFieldsAll:[{groupId:0,groupTitle:"客户信息",isFullRow:!1,compTpl:"<div></div>"}],methodsAll:[],distTplData:[],standardFields:[],standardFieldsButtom:[],excelDataRender:[],paraFileOptions:[],tMethods:[],tDataFields:[],tableTpls:[],buttomArea:[],excelData:[],cascaderGroup:[],cascaderGroupOptions:[{label:"label1",value:"value1",children:[{label:"ddd",value:"vvv"}]}],iconsOptions:[{label:"inner-gird-maintain.svg",value:"inner-gird-maintain.svg"},{label:"inner-grid-01.png",value:"inner-grid-01.png"},{label:"icon_trade_debt.png",value:"icon_trade_debt.png"},{label:"icon_trade_other.png",value:"icon_trade_other.png"},{label:"icon_trade_dayend.png",value:"icon_trade_dayend.png"},{label:"icon_trade_feature.png",value:"icon_trade_feature.png"},{label:"icon_trade_default.png",value:"icon_trade_default.png"},{label:"inner-gird-finance.svg",value:"inner-gird-finance.svg"},{label:"inner-gird-query.svg",value:"inner-gird-query.svg"},{label:"inner-gird-other.svg",value:"inner-gird-other.svg"},{label:"icon_trade_inside.png",value:"icon_trade_inside.png"},{label:"inner-grid-04.png",value:"inner-grid-04.png"},{label:"inner-grid-other.svg",value:"inner-grid-other.svg"},{label:"inner-grid-03.png",value:"inner-grid-03.png"}],parentMenuOptions:[],dialogVisiable:!1,menuSqlStr:""}},methods:{saveTmpExcel:function(){U.exportJsonToExcel([{"组名称(trade-group)":""},{"栏位名称":""},{"必输(Q)|不可用(D)|只读(R)|不可见(V)":""}],"生成交易模板.xls")},chooseExcel:function(){this.tradeRootChange()&&(this.fetchParaFileOptions(),this.$refs.inputFile.value="",this.$refs.inputFile.click())},inputFileChange:function(e){var t=this;return _()(A.a.mark(function r(){var a,n,o,s,i;return A.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(a=e.target.files[0],a.path,n=window.m.path.extname(a.path),[".xls",".xlsx"].includes(n)){r.next=6;break}return t.$notify({message:"必须是excel"}),r.abrupt("return");case 6:return r.next=8,U.readExcelAsync(a);case 8:o=r.sent,s=o.data.Sheet1.slice(1),i=s.map(function(e){var t=String(e.C).toUpperCase(),r=t.includes("Q"),a=t.includes("D"),n=t.includes("R"),o=t.includes("V"),s={groupTitle:e.A,label:e.B,":requisite":r,":disabled":a,":readonly":n,":visible":!o};return s[":visible"]&&delete s[":visible"],s}),t.parseExcel(i);case 12:case"end":return r.stop()}},r,t)}))()},calcCollapseValues:function(){var e=this.excelData.map(function(e){if(!e.compAttr.every(function(e){return""!==e.value&&void 0!==e.value}))return e.label});this.collapseValues=e.filter(function(e){return e})},genStandardField:function(){var e=this;return _()(A.a.mark(function t(){var r;return A.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,F.getStandardConfig(e);case 2:if((r=t.sent).isSuccess){t.next=6;break}return e.$notify({title:r.msg,duration:0}),t.abrupt("return");case 6:e.standardFields=JSON.parse(b()(r.data)),e.standardFieldsButtom=JSON.parse(b()(r.data));case 8:case"end":return t.stop()}},t,e)}))()},parseExcel:function(e){var t=(e=e.map(function(e){return e.groupTitle=String(e.groupTitle),e.groupTitle.trim()||(e.groupTitle="默认分组"),e})).filter(function(e){return e.label.includes("|")}),r=L.handleTableInfo(t,this.standardFields),a=r.tMsgs,n=r.tMethods,o=r.tDataFields,s=r.tableTpls;this.tMethods=n,this.tDataFields=o,this.tableTpls=s;var i=(e=e.filter(function(e){return!e.label.includes("|")})).findIndex(function(e){return"提交"==e.label.trim()});-1==i&&(i=e.length);var l=e.slice(i+1,e.length);e=e.slice(0,i);var u=F.transformExcelData(this,this.standardFields,e),c=u.excelData,d=u.msgs;if((d=d.concat(a)).length>0){(d=d.map(function(e){return" "+e+" "})).unshift('<div style="font-weight:bold;font-size:17px;">请联系标准组添加以下字段后再生成交易</div>');var m=d.join("");this.alert(m,"提示")}else{var p=F.transformExcelData(this,this.standardFieldsButtom,l),f=p.excelData,v=p.msgs;if(v.length>0){(v=v.map(function(e){return" "+e+" "})).unshift('<div style="font-weight:bold;font-size:17px;">请联系标准组添加以下字段后再生成交易</div>');var h=v.join("");this.alert(h,"提示")}else this.excelData=[],this.excelData=c,this.calcCollapseValues(),this.buttomArea=[],this.buttomArea=f,this.excelDataRender=this.excelData.concat(this.buttomArea)}},genTradeTpl:function(){var e=this;return _()(A.a.mark(function t(){var r,a,n,o,s,i,l,u,c,d,m;return A.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.validateForm();case 2:if(t.sent){t.next=6;break}return e.$notify({type:"warning",message:"交易属性填完"}),t.abrupt("return");case 6:if(0!=e.excelDataRender.length){t.next=9;break}return e.$notify({type:"warning",message:"先导入统计的excel"}),t.abrupt("return");case 9:r=L.genAll(e,e.excelData),a=r.excelFieldsAll,n=r.methodsAll,o=r.dataFieldsAll,s=r.importArr,a=a.map(function(e){return{groupId:e.groupId,groupTitle:e.groupTitle,isFullRow:e.isFullRow,compTpl:e.compTpl}}),i=L.genAll(e,e.buttomArea),l=i.excelFieldsAll,u=i.methodsAll,c=i.dataFieldsAll,l=l.map(function(e){return{groupId:e.groupId,groupTitle:e.groupTitle,isFullRow:e.isFullRow,compTpl:e.compTpl}}),d=L.twoDimensionalArray(e,a),m=L.twoDimensionalArray(e,l),n=n.concat(u),o=(o=o.concat(c)).filter(function(e,t){return o.indexOf(e)==t}),n=n.filter(function(e,t){return n.indexOf(e)==t}),e.writeToFile({distTplData:d,distTplDataB:m,methodsAll:n,dataFieldsAll:o,importArr:s});case 23:case"end":return t.stop()}},t,e)}))()},gentTradeMenu:function(){var e=this;return _()(A.a.mark(function t(){var r,a,n,o,s,i,l,u,c,d,m,p,f;return A.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.validateForm();case 2:if(t.sent){t.next=6;break}return e.$notify({type:"warning",message:"交易属性填完"}),t.abrupt("return");case 6:r=e.tradeAttrArea.menuPosition,a=e.tradeAttrArea.tradeCode,n=e.tradeAttrArea.tradeName,o=e.tradeAttrArea.menuIcon,"",s=e.tradeAttrArea.parentMenu,i="1"==e.tradeAttrArea.visiable?"1":"0",l="1"==e.tradeAttrArea.signVisiable?"1":"0",u=e.tradeAttrArea.tradeCodeBiz,c=e.tradeAttrArea.tradeName,d=e.tradeAttrArea.devGroup,m=e.tradeAttrArea.devGroupChild?"/"+e.tradeAttrArea.devGroupChild:"",p="/t"+e.tradeAttrArea.tradeCode,f="INSERT INTO `pub_db`.`IB_UPM_MENU_INFO`(`APP_NO`, `MENU_VIEW_NO`, `MENU_NO`, `MENU_NM`, `MENU_ICON_PATH`, `MENU_PATH`, `MENU_TYP_CD`, `QUNG_SEQ_NO`, `PARE_RANK_MENU_NO`, `VIS_FLG`, `SYNC_ASYNC_FLG`, `BLNG_LPR_CD`, `MATN_ORG_NO`, `MATN_TM`, `MATN_DT`, `REMRK_1`, `REMRK_2`, `REMRK_3`, `MATN_TELR_NO`, `SGNIN_VIS_FLG_CD`, `CLNT_MENU_FLG`, `IS_BPMN_FLG`, `MENU_SIZE`, `ACTIVE_CLASS`, `BCKGRND_COLR_CD`, `BCKGRND_PICT_PATH`, `LAYOUT_ROW`, `LAYOUT_COL`, `MENU_ENG_NM`, `BIZ_MENU_NO`, `BIZ_MENU_NM`, `STRK_BAL_FLG`, `NEED_PR_ELEC_SIGNET_FLG`, `UPLDG_ATCH_FLG`) VALUES ('TE', '"+r+"', '"+a+"', '"+n+"', '"+o+"', '"+("modules/trade/"+d+m+p+"/index.html")+"', '02', 100, '"+s+"', '"+i+"', '1', '0000', '0000', NULL, NULL, NULL, NULL, NULL, NULL, '"+l+"', '1', NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, '"+u+"', '"+c+"', NULL, NULL, NULL);",e.menuSqlStr=f,e.dialogVisiable=!0;case 24:case"end":return t.stop()}},t,e)}))()},writeToFile:function(e){var t=e.distTplData,r=e.distTplDataB,a=e.methodsAll,n=e.dataFieldsAll,o=e.importArr,s={tradeCode:"t"+this.tradeAttrArea.tradeCode,tradeCodeBiz:this.tradeAttrArea.tradeCodeBiz,Author:(this.tradeAttrArea.userName+"   "+this.tradeAttrArea.email).replace(/\n/g,""),time:new Date,tradeName:this.tradeAttrArea.tradeName,groups:t,dataFieldsAll:n,methodsAll:a,tMethods:this.tMethods,tDataFields:this.tDataFields,tableTpls:this.tableTpls,buttomGroup:r,importArr:o},i=window.m,l=i.path,u=i.fs,c=(i.process,i.ejs),d=(window.m.process.cwd(),this.buildPath("src/vue-render/tpls/App.ejs")),m=l.resolve(this.tradeAttrArea.tradeRoot,"modules/trade",this.tradeAttrArea.devGroup,this.tradeAttrArea.devGroupChild,"t"+this.tradeAttrArea.tradeCode);u.mkdirpSync(m);var p=l.resolve(m,"App.vue");console.log(p,"写入成功");var f=u.readFileSync(d,{encoding:"utf-8"}),v=c.render(f,s);u.writeFileSync(p,v,{encoding:"utf-8"});var h=this.buildPath("src/vue-render/tpls/main.ejs"),b=l.resolve(m,"main.js"),g=u.readFileSync(h,{encoding:"utf-8"}),A=c.render(g,{});u.writeFileSync(b,A,{encoding:"utf-8"}),this.$notify({type:"success",title:"成功",message:"写入模板成功"})},tradeRootChange:function(){if(/FCClient$/.test(this.tradeAttrArea.tradeRoot))return window.m.fs.existsSync(this.tradeAttrArea.tradeRoot)?(this.fetchDevGroupOptions(),window.m.store.set("tradeRoot",this.tradeAttrArea.tradeRoot),!0):(this.alert("FCClient项目根目录不存在:"+this.tradeAttrArea.tradeRoot),this.$refs.tradeRoot.focus(),!1);this.alert("必须以FCClient结尾")},getUsernameEmail:function(){var e=this,t=window.m.child_process;t.exec("git config --global user.name",{encoding:"utf-8"},function(t,r,a){var n=r.replace(/[\n\s]/g,"");e.tradeAttrArea.userName=n}),t.exec("git config --global user.email",{encoding:"utf-8"},function(t,r,a){var n=r.replace(/[\n\s]/g,"");e.tradeAttrArea.email=n})},validateForm:function(){var e=this;return new v.a(function(t){e.$refs.titleForm.validate(function(r){var a=e.tradeRootChange();t(r&&a)})})},fetchParaFileOptions:function(){var e=window.m,t=e.fs,r=e.path.resolve(this.tradeAttrArea.tradeRoot,"static/para/selector-config"),a=t.readdirSync(r);a=a.filter(function(e){return/\.json/.test(e)}),this.paraFileOptions=a.map(function(e){return{label:e,value:e}})},paraFileOptionsChange:function(e,t){var r=window.m,a=r.fs,n=r.path,o=t.find(function(e){return"listName"===e.name});if(o){var s=n.resolve(this.tradeAttrArea.tradeRoot,"static/para/selector-config",e),i=a.readFileSync(s),l=p()(JSON.parse(i));o.listNameOptions=l.map(function(e){return{label:e,value:e}}),o.value=""}else console.log("不存在listName",t)},fetchStandardFields:function(){var e=this;return _()(A.a.mark(function t(){return A.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.fetchStandardFields();case 2:e.sent;case 3:case"end":return e.stop()}},t,e)}))()},fetchDevGroupOptions:function(){var e=[],t=window.m,r=t.fs,a=t.path,n=a.resolve(this.tradeAttrArea.tradeRoot,"modules/trade");r.readdirSync(n).forEach(function(t){var o=a.resolve(n,t);r.statSync(o).isDirectory()&&e.push({label:t,value:t})}),this.devGroupOptions=e},devGroupChildBlur:function(){if(this.tradeRootChange()&&(this.tradeAttrArea.devGroupChild="",this.tradeAttrArea.devGroup)){var e=[],t=window.m,r=t.fs,a=t.path,n=a.resolve(this.tradeAttrArea.tradeRoot,"modules/trade",this.tradeAttrArea.devGroup);r.readdirSync(n).forEach(function(t){var o=a.resolve(n,t);r.statSync(o).isDirectory()&&e.push({label:t,value:t})}),this.devGroupOptionsChild=e}},getParentMenuInfo:function(){var e=this;return _()(A.a.mark(function t(){var r;return A.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.getParentMenuInfo();case 2:if((r=t.sent).isSuccess){t.next=6;break}return e.alert("获取父级餐单失败"),t.abrupt("return");case 6:e.parentMenuOptions=r.data.map(function(e){return{label:e.MENU_NM+"-"+e.MENU_NO,value:e.MENU_NO}});case 7:case"end":return t.stop()}},t,e)}))()}},computed:{},mounted:function(){this.genStandardField(),this.getUsernameEmail(),window.m.store.has("tradeRoot")&&(this.tradeAttrArea.tradeRoot=window.m.store.get("tradeRoot")),this.getParentMenuInfo()}},q={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"GenTrade"},[r("el-divider",{attrs:{"content-position":"left"}},[e._v("交易属性")]),e._v(" "),r("el-form",{ref:"titleForm",attrs:{model:e.tradeAttrArea,"label-width":"130px",size:"mini"}},[r("el-row",[r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"FCClient路径",rules:e.titleRule,prop:"tradeRoot"}},[r("el-input",{ref:"tradeRoot",on:{change:e.tradeRootChange},model:{value:e.tradeAttrArea.tradeRoot,callback:function(t){e.$set(e.tradeAttrArea,"tradeRoot",t)},expression:"tradeAttrArea.tradeRoot"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"开发组",rules:e.titleRule,prop:"devGroup"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择"},on:{focus:e.devGroupChildBlur,change:e.devGroupChildBlur},model:{value:e.tradeAttrArea.devGroup,callback:function(t){e.$set(e.tradeAttrArea,"devGroup",t)},expression:"tradeAttrArea.devGroup"}},e._l(e.devGroupOptions,function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._v(" "),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"子目录",prop:"devGroupChild"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择"},model:{value:e.tradeAttrArea.devGroupChild,callback:function(t){e.$set(e.tradeAttrArea,"devGroupChild",t)},expression:"tradeAttrArea.devGroupChild"}},e._l(e.devGroupOptionsChild,function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1)],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"交易名称",rules:e.titleRule,prop:"tradeName"}},[r("el-input",{model:{value:e.tradeAttrArea.tradeName,callback:function(t){e.$set(e.tradeAttrArea,"tradeName",t)},expression:"tradeAttrArea.tradeName"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"开发者",rules:e.titleRule,prop:"userName"}},[r("el-input",{model:{value:e.tradeAttrArea.userName,callback:function(t){e.$set(e.tradeAttrArea,"userName",t)},expression:"tradeAttrArea.userName"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"邮件",rules:e.titleRule,prop:"email"}},[r("el-input",{model:{value:e.tradeAttrArea.email,callback:function(t){e.$set(e.tradeAttrArea,"email",t)},expression:"tradeAttrArea.email"}})],1)],1)],1),e._v(" "),r("el-divider",{attrs:{"content-position":"left"}},[e._v("菜单属性")]),e._v(" "),r("el-row",[r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"菜单位置",rules:e.titleRule,prop:"menuPosition"}},[r("el-select",{staticStyle:{width:"100%"},model:{value:e.tradeAttrArea.menuPosition,callback:function(t){e.$set(e.tradeAttrArea,"menuPosition",t)},expression:"tradeAttrArea.menuPosition"}},[r("el-option",{attrs:{label:"客户服务",value:"001"}}),e._v(" "),r("el-option",{attrs:{label:"内部服务",value:"002"}})],1)],1)],1),e._v(" "),r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"6位交易码",rules:e.titleRule,prop:"tradeCodeBiz"}},[r("el-input",{model:{value:e.tradeAttrArea.tradeCodeBiz,callback:function(t){e.$set(e.tradeAttrArea,"tradeCodeBiz",t)},expression:"tradeAttrArea.tradeCodeBiz"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"8位交易码",rules:e.titleRule,prop:"tradeCode"}},[r("el-input",{model:{value:e.tradeAttrArea.tradeCode,callback:function(t){e.$set(e.tradeAttrArea,"tradeCode",t)},expression:"tradeAttrArea.tradeCode"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"父级菜单",rules:e.titleRule,prop:"parentMenu"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{filterable:""},model:{value:e.tradeAttrArea.parentMenu,callback:function(t){e.$set(e.tradeAttrArea,"parentMenu",t)},expression:"tradeAttrArea.parentMenu"}},e._l(e.parentMenuOptions,function(e,t){return r("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._v(" "),r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"菜单icon",rules:e.titleRule,prop:"menuIcon"}},[r("el-select",{staticStyle:{width:"100%"},model:{value:e.tradeAttrArea.menuIcon,callback:function(t){e.$set(e.tradeAttrArea,"menuIcon",t)},expression:"tradeAttrArea.menuIcon"}},e._l(e.iconsOptions,function(e,t){return r("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._v(" "),r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"是否可见",rules:e.titleRule,prop:"visiable"}},[r("el-select",{staticStyle:{width:"100%"},model:{value:e.tradeAttrArea.visiable,callback:function(t){e.$set(e.tradeAttrArea,"visiable",t)},expression:"tradeAttrArea.visiable"}},[r("el-option",{attrs:{label:"是",value:"1"}}),e._v(" "),r("el-option",{attrs:{label:"否",value:"0"}})],1)],1)],1),e._v(" "),r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"签到可见",rules:e.titleRule,prop:"signVisiable"}},[r("el-select",{staticStyle:{width:"100%"},model:{value:e.tradeAttrArea.signVisiable,callback:function(t){e.$set(e.tradeAttrArea,"signVisiable",t)},expression:"tradeAttrArea.signVisiable"}},[r("el-option",{attrs:{label:"是",value:"1"}}),e._v(" "),r("el-option",{attrs:{label:"否",value:"0"}})],1)],1)],1)],1)],1),e._v(" "),r("el-row",[r("el-button",{attrs:{type:"primary",icon:"el-icon-document"},on:{click:e.genTradeTpl}},[e._v("生成交易")]),e._v(" "),r("el-button",{attrs:{type:"primary",icon:"el-icon-document"},on:{click:e.gentTradeMenu}},[e._v("生成菜单sql")]),e._v(" "),r("el-button",{attrs:{icon:"el-icon-upload2"},on:{click:e.chooseExcel}},[e._v("导入交易统计excel")]),e._v(" "),r("el-button",{attrs:{icon:"el-icon-download"},on:{click:e.saveTmpExcel}},[e._v("生成交易统计模板excel")])],1),e._v(" "),r("el-divider",{attrs:{"content-position":"left"}},[e._v("交易内容")]),e._v(" "),r("div",[r("el-form",{ref:"form",attrs:{"label-width":"80px",size:"mini"}},[r("div",{staticClass:"groups"},[r("el-collapse",{model:{value:e.collapseValues,callback:function(t){e.collapseValues=t},expression:"collapseValues"}},e._l(e.excelDataRender,function(t,a){return r("div",{key:a,staticClass:"group"},[r("el-collapse-item",{attrs:{name:t.label}},[r("template",{slot:"title"},[r("span",[e._v("组："+e._s(t.groupTitle))]),e._v(" "),r("span",{staticStyle:{"margin-left":"30px"}},[e._v("栏位："+e._s(t.label))])]),e._v(" "),r("el-row",e._l(t.compAttr,function(a,n){return r("div",{key:n},[r("el-col",{attrs:{span:6}},["paraFile"==a.name?[r("el-form-item",{attrs:{label:a.name,rules:e.rules}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",filterable:""},on:{change:function(r){return e.paraFileOptionsChange(a.value,t.compAttr)}},model:{value:a.value,callback:function(t){e.$set(a,"value",t)},expression:"compo.value"}},e._l(e.paraFileOptions,function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)]:"listName"==a.name?[r("el-form-item",{attrs:{label:a.name,rules:e.rules}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",filterable:""},model:{value:a.value,callback:function(t){e.$set(a,"value",t)},expression:"compo.value"}},e._l(a.listNameOptions,function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)]:[r("el-form-item",{attrs:{label:a.name,rules:e.rules}},[r("input",{directives:[{name:"model",rawName:"v-model",value:a.value,expression:"compo.value"}],staticStyle:{width:"100%"},domProps:{value:a.value},on:{input:function(t){t.target.composing||e.$set(a,"value",t.target.value)}}})])]],2)],1)}),0)],2)],1)}),0)],1)])],1),e._v(" "),r("input",{ref:"inputFile",staticStyle:{display:"none"},attrs:{type:"file"},on:{change:e.inputFileChange}}),e._v(" "),r("el-dialog",{attrs:{visible:e.dialogVisiable,title:"菜单sql","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.dialogVisiable=t}}},[r("h3",[e._v("生成菜单sql")]),e._v(" "),r("el-input",{attrs:{autosize:{minRows:10,maxRows:100},type:"textarea"},model:{value:e.menuSqlStr,callback:function(t){e.menuSqlStr=t},expression:"menuSqlStr"}})],1)],1)},staticRenderFns:[]};var j=r("C7Lr")(V,q,!1,function(e){r("FK5u")},"data-v-1667cace",null).exports,$=r("IHPB"),W=r.n($),Y={name:"GenPrintF",components:{},props:{},data:function(){return{labelWidth:"17.5",tradeRoot:"E:\\work\\zantong\\qdgz_TEClient\\FCClient",fTableName:"xxx.aft",config:"IMEI序列号|SIM卡序列号|保证金金额|保证金账号|保证金账户标志|IMEI序列号,SIM卡序列号|保证金金额,保证金账号,保证金账户标志",title:"无标题",standardField:[{label:"账号",value:"acc"},{label:"客户姓名",value:"custName"},{label:"性别",value:"sex"}],fields:[],tables:[]}},methods:{parseFields:function(){var e=this;return _()(A.a.mark(function t(){var r,a,n,o,s,i;return A.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.checkPath();case 2:if(t.sent){t.next=5;break}return t.abrupt("return");case 5:if(r=e.config.split("|").map(function(e){return e.replace(/[\s\t\n]/g,"")}).filter(function(e){return e}),a=r.filter(function(e){return!/[,，]/.test(e)}),n=(n=r.filter(function(e){return/[,，]/.test(e)})).map(function(e){return e.split(/[,，]/g)}),o=[].concat(W()(a)),n.forEach(function(e){e=e.filter(function(e){return e}),o=o.concat(e)}),0==(s=e.checkFields(o)).length){t.next=16;break}return i=s.join(" "),e.alert(i,"以下字段在标准库中不存在，联系标准组添加后继续生成F表"),t.abrupt("return");case 16:e.fields=a.map(function(t){t=t.replace(/[\s\t\n]/g,"");var r=e.findEnField(t);return{label:t,value:r.value,isAmt:r.isAmt,isFullRow:r.isFullRow}}),e.tables=n.map(function(t){return t.map(function(t){t=t.replace(/[\s\t\n]/g,"");var r=e.findEnField(t);return{label:t,value:r.value,isAmt:r.isAmt,isFullRow:r.isFullRow}})}),e.genFtableXml(e.fields,e.tables);case 19:case"end":return t.stop()}},t,e)}))()},checkFields:function(e){for(var t=this,r=[],a=function(a){t.standardField.find(function(t){return t.label==e[a]})||r.push(e[a])},n=0;n<e.length;n++)a(n);return r},findEnField:function(e){var t=this.standardField.find(function(t){return t.label==e});return{value:t.value,isAmt:t.isAmt,isFullRow:t.isFullRow}},checkPath:function(){var e=this;return _()(A.a.mark(function t(){var r,a;return A.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.fTableName.trim()){t.next=3;break}return e.alert("f表名称不能为空"),t.abrupt("return",!1);case 3:if(e.config){t.next=6;break}return e.alert("F表字段不能为空"),t.abrupt("return",!1);case 6:if(!window.m.fs.existsSync(e.tradeRoot)){t.next=12;break}window.m.store.set("tradeRoot",e.tradeRoot),t.next=14;break;case 12:return e.alert("项目路径不存在\n"+e.tradeRoot),t.abrupt("return");case 14:if(r=window.m.path.resolve(e.tradeRoot,"print"),window.m.fs.existsSync(r)){t.next=19;break}return e.alert("目录"+r+"不存在"),t.abrupt("return",!1);case 19:if(a=window.m.path.resolve(r,e.fTableName),!window.m.fs.existsSync(a)){t.next=32;break}return t.next=24,e.alert("文件f表"+a+"已存在是否覆盖？");case 24:if(!t.sent){t.next=29;break}return t.abrupt("return",!0);case 29:return t.abrupt("return",!1);case 30:t.next=33;break;case 32:return t.abrupt("return",!0);case 33:case"end":return t.stop()}},t,e)}))()},transformFields:function(e){for(var t=[],r=0;r<e.length;r++){var a=e[r];if(0==t.length)t.push([a]);else{var n=t[t.length-1];if(1==n.length){var o=n[n.length-1];o.isFullRow||o.isAmt?t.push([a]):n.push(a);continue}2==n.length&&t.push([a])}}return t},genFtableXml:function(e,t){var r=this;return _()(A.a.mark(function a(){var n,o,s,i,l,u,c,d,m,p;return A.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:n=window.m,o=n.path,s=n.fs,n.process,i=n.ejs,l=r.transformFields(e),console.log("this.groups",b()(l)),console.log("this.tables",b()(t)),u={title:r.title,groups:l,tables:t,labelWidth1:r.labelWidth},c=r.buildPath("src/vue-render/tpls/aft.ejs"),d=s.readFileSync(c,{encoding:"utf-8"}),m=i.render(d,u),p=o.resolve(r.tradeRoot,"print",r.fTableName),console.log("生成F表：",p),s.writeFileSync(p,m,{encoding:"utf-8"}),r.alert("生成F表成功\n"+p);case 12:case"end":return a.stop()}},a,r)}))()},queryAllStandardFields:function(){var e=this;return _()(A.a.mark(function t(){var r;return A.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.queryAllStandardFields();case 2:if((r=t.sent).isSuccess){t.next=6;break}return e.alert("获取标准字段出错"),t.abrupt("return");case 6:e.standardField=r.data;case 7:case"end":return t.stop()}},t,e)}))()}},watch:{},filters:{},mounted:function(){this.queryAllStandardFields(),window.m.store.has("tradeRoot")&&(this.tradeRoot=window.m.store.get("tradeRoot"))}},H={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"GenPrintF"},[r("el-form",{ref:"form",attrs:{"label-width":"130px",size:"mini"}},[r("el-form-item",{attrs:{label:"FCClient路径："}},[r("el-input",{staticStyle:{width:"100%"},model:{value:e.tradeRoot,callback:function(t){e.tradeRoot=t},expression:"tradeRoot"}})],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"F表文件名："}},[r("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"00101001.aft"},model:{value:e.fTableName,callback:function(t){e.fTableName=t},expression:"fTableName"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"F表标题："}},[r("el-input",{staticStyle:{width:"100%"},model:{value:e.title,callback:function(t){e.title=t},expression:"title"}})],1)],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"F表字段："}},[r("el-input",{attrs:{type:"textarea",autosize:{minRows:10,maxRows:40},placeholder:"\n      输入字段格式:账号|客户姓名|性别|账户类型\n      如果为表格则逗号隔开:性别,账号,客户姓名\n      如果有字段和表格则:账号|客户姓名|性别|性别,账号,客户姓名"},model:{value:e.config,callback:function(t){e.config=t},expression:"config"}})],1)],1),e._v(" "),r("el-row",[r("el-button",{attrs:{type:"primary"},on:{click:e.parseFields}},[e._v("生成F表")])],1)],1)},staticRenderFns:[]};var z=r("C7Lr")(Y,H,!1,function(e){r("Mv8w")},"data-v-4f9422ac",null).exports,K=window.m.xlsx,Q={name:"GenInterface",components:{},props:{},data:function(){return{}},methods:{selectExcel:function(){this.$refs.inputFile.value="",this.$refs.inputFile.click()},transform:function(){},inputFileChange:function(e){var t=this;return _()(A.a.mark(function r(){var a,n,o,s,i,l,u,c,d,m,p,f,v,h,b;return A.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(a=window.m,n=a.fs,o=a.path,s=e.target.files[0],i=s.path,window.m.path.basename(i),l=window.m.path.extname(s.path),u=o.parse(i),c=u.dir,d=u.ext,m=u.name,p=o.resolve(c,m+"_"+Date.now()+d),[".xls",".xlsx"].includes(l)){r.next=10;break}return t.$notify({message:"必须是excel"}),r.abrupt("return");case 10:return r.next=12,U.readExcelAsync(s);case 12:return f=r.sent,v=f.data,h=n.readFileSync(i),b=K.read(h,{type:"array"}),r.next=18,t.genNewExcel(v,b,p);case 18:case"end":return r.stop()}},r,t)}))()},genNewExcel:function(e,t,r){var a=this;return _()(A.a.mark(function n(){var o;return A.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return a.genStyle(t),n.next=3,a.handleData(e,t);case 3:if(n.sent){n.next=6;break}return n.abrupt("return");case 6:o=K.write(t,{type:"buffer",bookType:"xlsx"}),fs.writeFileSync(r,o),a.alert("成功生成文件"+r,"成功");case 9:case"end":return n.stop()}},n,a)}))()},genStyle:function(e){var t=[{wch:20},{wch:20},{wch:20},{wch:8},{wch:8},{wch:3},{wch:20},{wch:20},{wch:20},{wch:20},{wch:20},{wch:20},{wch:20}],r=new Array(20).fill(1).map(function(e){return{wch:20}}),a=e.Sheets;for(var n in a)a[n]["!cols"]="INDEX"==n?r:t},handleData:function(e,t){var r=this;return _()(A.a.mark(function a(){var n,o,s,i,l,u,c,d,m,p,f,v;return A.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:n=[],o={},a.t0=A.a.keys(e);case 3:if((a.t1=a.t0()).done){a.next=24;break}if("INDEX"!=(s=a.t1.value)){a.next=7;break}return a.abrupt("continue",3);case 7:o[s]||(o[s]={}),i=e[s],l=0;case 10:if(!(l<i.length)){a.next=22;break}if(u=i[l],!String(u.B).trim()){a.next=19;break}if(c="G"+(l+1),!(l>5)){a.next=19;break}return a.next=17,r.findEnField(u.B,n);case 17:d=a.sent,o[s][c]=d;case 19:l++,a.next=10;break;case 22:a.next=3;break;case 24:for(m in o)for(p in o[m])(f=t.Sheets[m][p])&&(f.v=o[m][p]);return 0!=n.length&&(v=n.map(function(e){return'<span style="margin-left:5px;">'+e+"</span>"}).join(""),r.alert(v,"以下字段联系标准组添加后再生成接口")),a.abrupt("return",0==n.length);case 27:case"end":return a.stop()}},a,r)}))()},findEnField:function(e){var t=this;arguments.length>1&&void 0!==arguments[1]&&arguments[1];return _()(A.a.mark(function r(){return A.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!["中文名称"].includes(e)){t.next=3;break}return t.abrupt("return","");case 3:return t.abrupt("return","test_field");case 4:case"end":return t.stop()}},r,t)}))()}},watch:{},filters:{},mounted:function(){}},J={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"GenInterface"},[t("el-divider",{attrs:{"content-position":"left"}},[this._v("操作区")]),this._v(" "),t("el-row",[t("el-button",{attrs:{type:"primary",icon:"el-icon-upload2"},on:{click:this.selectExcel}},[this._v("选择需要转换的接口excel")])],1),this._v(" "),t("input",{ref:"inputFile",staticStyle:{display:"none"},attrs:{type:"file"},on:{change:this.inputFileChange}})],1)},staticRenderFns:[]};var X=r("C7Lr")(Q,J,!1,function(e){r("NqFX")},"data-v-513705ff",null).exports;a.default.use(u.a);var Z=new u.a({routes:[{path:"/",name:"Home",redirect:"/GenTrade",component:d},{path:"/GenTrade",name:"GenTrade",component:j},{path:"/GenPrintF",name:"GenPrintF",component:z},{path:"/GenInterface",name:"GenInterface",component:X}]}),ee=(r("0CLL"),r("09yM"),r("TcQY")),te=r.n(ee),re=(r("+hAf"),{methods:{success:function(e,t){return{isSuccess:!0,msg:t||"",data:e||{}}},fail:function(e,t){return{isSuccess:!1,msg:t||"",data:e||{}}},alert:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new v.a(function(a){e.$alert(t,r,{dangerouslyUseHTMLString:!0,closeOnPressEscape:!1,closeOnClickModal:!1}).then(function(e){return a(!0)}).catch(function(e){return a(!1)})})},repeat:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"\t").repeat(e)},buildPath:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=window.m,r=t.isDev,a=t.path,n=(t.process,window.m.process.cwd());return r?a.resolve(n,e):a.resolve(n,"resources/app/",e)}},mounted:function(){(window.comps||(window.comps={}))[this.$options.name||"anonymous"]=this}});a.default.use(te.a,{size:"small",zIndex:3e3}),a.default.config.productionTip=!1,a.default.mixin(re),new a.default({el:"#app",router:Z,components:{App:l},template:"<App/>"})},NqFX:function(e,t){},iWT2:function(e,t){},yfIn:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.js.map